<div id="map-canvas"></div>

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h3 id="myModalLabel">Choose photos:</h3>
  </div>
  <div class="modal-body">
    <% @albums.each do |album| %>
      <% next if album.photos.empty? %>
      <div style="display: inline;" class="album" data-id="<%= album.id %>">
        <%= album.title %>
      </div>
      <div class="album" data-id="<%= album.id %>">
        <!-- <img src='https://www.filepicker.io/api/file/LE6Na8FtSRCyK4HUyiLW/convert?w=50&h=50&fit=clip'> -->
        <img src='<%= album.photos.first.image_url %>/convert?w=50&h=50&fit=clip'>
      </div>
    <% end %>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save</button>
  </div>
</div>


<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />


<style type="text/css">
  #yield { height: 500px; margin: 0; padding: 0 }
  #map-canvas { height: 100% }
</style>


<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBI7wc83S1nexP3v0zR_GSl-_Se_JnTzPE&sensor=false">
</script>

<script type="text/javascript">
  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(20.000,0.000),
      zoom: 2,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("map-canvas"),
      mapOptions);

    google.maps.event.addListener(map, "click", function(event){
      // console.log(event);
      $('#myModal').modal();
      // placeMarker(event.latLng, map);
    });
  }

  function placeMarker(location, map) {
    var marker = new google.maps.Marker({
        position: location,
        map: map
    });
  }

  $('.album').on("click", function(event) {
    var album_num = $(event.currentTarget).attr('data-id');
    $.ajax({
      url: '/users/' + <%= current_user.id %> + '/albums/' + album_num + '/album_photos/',
      type: 'GET',
      success: function(data) {
        var html_str = ''
        console.log(data);
        for (var i=0; i<data.length; i++) {
          
        }
      }
    })
    $('.album').html('');
  })

  google.maps.event.addDomListener(window, 'load', initialize);
</script>
