
  <% @photos.each do |photo| %>

    <div class="edit_photo" data-id-photo="<%= photo.id %>">
      <img src="<%=photo.image_url %>/convert?w=300&h=300&fit=clip"></img>
      <br>
      <br>

      <label for="name">Name</label>
      <div id="name_label"></div>
      <input class="name_field" type="text" name="photo[name]" id="name" />

      <label for="album">Album</label>
      <div id="album_label"></div>
      <select class="album_dropdown" id="album" name="photo[album_id]">
        <% @albums.each do |album| %>
          <option value="<%= album.id %>"><%= album.title %></option>
        <% end %>
      </select>
      <br>

      <label for="public">Public</label>
      <div id="public_label"></div>
      <input type="radio" name="photo[public]" id="public" 
             value="true" class="radio_button"
             <%= "checked" if photo.public == true %> >
      <label for="private">Private</label> 
      <input type="radio" name="photo[public]" id="private" 
             value="false" class="radio_button"
             <%= "checked" if photo.public == false %> >
     

    </div>
  <% end %>

<script>
  $('.album_dropdown').on("click", function(event) {
    console.log($(event.currentTarget).parent().attr('data-id-photo'));
    var photo_id = $(event.currentTarget).parent().attr('data-id-photo');
    var album_id_var = $(event.currentTarget).val();
    $.ajax({
      url: '/photos/' + photo_id,
      type: 'PUT',
      data: {photo: {album_id: album_id_var}},
      success: function(data) {
        $('#album_label').text("Saved").css("color", "green");
      }
    });
  });

  $('.name_field').on("keypress", function(event) {
    // console.log($(event.currentTarget).val());
    if (event.which === 13) {
      var photo_id = $(event.currentTarget).parent().attr('data-id-photo');
      var value = $(event.currentTarget).val();
      $.ajax({
        url: '/photos/' + photo_id,
        type: 'PUT',
        data: {photo: {name:  value }},
        success: function(data) {
          $('#name_label').text("Saved").css("color", "green");
        }
      });
    }
  });

  $('radio_button').on("click", function(event) {
    var photo_id = $(event.currentTarget).parent().attr('data-id-photo');
    var value = $(event.currentTarget).val();
    $.ajax({
      url: '/photos/' + photo_id,
      type: 'PUT',
      data: {photo: {public: value}}
      success: function(data) {
        $('#public_label').text("Saved").css("color", "green");
      }
    });
  });
</script>